(()=>{"use strict";const t=Object.freeze({label_height:20,top_padding:20,bar_width:16,bar_style:"blue",foreground_style:"#FFF"});function e(e,s,i,l,a,h,n,r=t){const c=a-r.bar_width/2,o=h-s;n>s?e.clearRect(c,h-n,r.bar_width,n-s):(e.fillStyle=r.bar_style,e.fillRect(c,o,r.bar_width,s-n)),e.fillStyle=r.foreground_style,e.fillText(i,a,h+r.label_height/2),e.fillText(l.toString(),a,r.top_padding/2)}function s(t,e){if(e.every((t=>0==t)))return e;const s=Math.max(...e);return e.map((e=>Math.round(e/s*t)))}class i extends HTMLElement{#t;#e;#s;#i;get width(){const t=this.getAttribute("width");return null===t?400:parseInt(t)}set width(t){this.setAttribute("width",t.toString()),this.#t.canvas.width=t,this.#l(this.#e)}get height(){const t=this.getAttribute("height");return null===t?300:parseInt(t)}set height(t){this.setAttribute("height",t.toString()),this.#t.canvas.height=t,this.#l(this.#e)}get values(){return this.#e.slice()}set values(t){const e=this.#e;this.#e=t.slice(),this.#l(e)}get labels(){return this.#s.slice()}set labels(t){this.#s=t.slice(),this.#l(this.#e)}constructor(){super(),this.#i=Object.assign({},t);const e=this.attachShadow({mode:"open"}),s=document.createElement("canvas");s.width=this.width,s.height=this.height,s.style.border="1px solid black",e.appendChild(s),this.#t=s.getContext("2d");const i=this.getAttribute("values");this.#e=null===i?[]:i.split(",").map(parseFloat);const l=this.getAttribute("labels");this.#s=null===l?this.#e.map((t=>t.toString())):l.split(","),this.redraw()}set_value(t,e){const s=this.#e.slice();this.#e[t]=e,this.#l(s)}set_label(t,e){this.#s[t]=e,this.#l(this.#e)}#l(i){!function(i,l,a,h,n,r,c=t){i.textAlign="center",i.textBaseline="middle";const o=a-c.label_height,u=o-c.top_padding,d=s(u,h),g=s(u,n),p=Math.min(h.length,r.length,n.length),b=l/(p+1);i.clearRect(0,0,l,c.top_padding),i.clearRect(0,o,l,a-o);for(var v=0;v<p;++v)e(i,d[v],r[v],h[v],b*(v+1),o,g[v],c);i.strokeStyle=c.foreground_style,i.clearRect(0,o-1,l,2),i.beginPath(),i.moveTo(0,o),i.lineTo(l,o),i.stroke()}(this.#t,this.#t.canvas.width,this.#t.canvas.height,this.#e,i,this.#s,this.#i)}redraw(){!function(i,l,a,h,n,r=t){i.clearRect(0,0,l,a),i.textAlign="center",i.textBaseline="middle";const c=a-r.label_height,o=s(c-r.top_padding,h),u=Math.min(h.length,n.length),d=l/(u+1);for(var g=0;g<u;++g)e(i,o[g],n[g],h[g],d*(g+1),c,0,r);i.strokeStyle=r.foreground_style,i.clearRect(0,c-1,l,2),i.beginPath(),i.moveTo(0,c),i.lineTo(l,c),i.stroke()}(this.#t,this.#t.canvas.width,this.#t.canvas.height,this.#e,this.#s,this.#i)}}customElements.define("bar-graph",i)})();